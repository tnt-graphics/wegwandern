var devowlWp_realProductManagerWpClient;(()=>{"use strict";var e,t={9314:(e,t,n)=>{n.r(t),n.d(t,{Avatar:()=>i.A,CLICK_HANDLER_PLUGIN_UPDATE_MODAL_ATTRIBUTE:()=>je,Card:()=>o.A,FeedbackModal:()=>xe,Form:()=>a.A,HASH_HANDLER_PLUGIN_UPDATE_MODAL_PREFIX:()=>ue,LearnMoreTag:()=>E,OptionStore:()=>H,PLUGIN_UPDATE_FORM_LAYOUT:()=>F,PLUGIN_UPDATE_FORM_LAYOUT_MARGIN_BOTTOM:()=>N,PluginUpdateEmbed:()=>re,PluginUpdateErrorNotice:()=>ae,PluginUpdateForm:()=>L,PluginUpdateLicenseList:()=>q,PluginUpdateLicenseListItem:()=>W,PluginUpdateLicenseTelemetryDataModal:()=>O,PluginUpdateModal:()=>le,PluginUpdateStore:()=>se,PluginUpdateTermFields:()=>U,Provider:()=>pe,RootStore:()=>ie,Space:()=>r.A,listenHashPluginUpdate:()=>he,listenPluginDeactivation:()=>we,listenPluginUpdateLinkClick:()=>Ae,locationRestAnnouncementActive:()=>Z,locationRestLicenseDelete:()=>G,locationRestLicenseRetry:()=>J,locationRestLicenseTelemetryGet:()=>z,locationRestPluginFeedbackPost:()=>ve,locationRestPluginUpdateGet:()=>ne,locationRestPluginUpdatePatch:()=>Q,locationRestPluginUpdateSkipPost:()=>ee,useStores:()=>oe});const s=ReactJSXRuntime;var i=n(6086),o=n(4225),a=n(2651),r=n(3978);const l=devowlWp_utils,c=()=>{let e;return[!1,new Promise((t=>e=t)),e]},d={loading:c(),complete:c(),interactive:c()},p=["readystatechange","rocket-readystatechange","DOMContentLoaded","rocket-DOMContentLoaded","rocket-allScriptsLoaded"];var u=n(8915),h=n(8197),g=n(9991),y=n(7922),m=n(1594),v=n(9117),b=n(6565),f=n(1767),x=n(8779),w=n(4936),j=n(8116);let A;function S(){return A||(A=(0,l.createLocalizationFactory)("devowl-wp-real-product-manager-wp-client"))}const P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S()._x(...t)},k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S().__(...t)},C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S()._i(...t)},O=(0,y.PA)((e=>{let{license:t,linkWrapper:n,disabled:i,children:o}=e;const{busy:a,telemetryData:r,telemetryDataSharingOptIn:l}=t,[c,d]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{c&&!r&&t.fetchTelemetryData()}),[c,r,t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.A,{title:k("Telemetry data preview"),open:c&&!i,onCancel:()=>d(!1),cancelText:k("Close"),okButtonProps:{style:{display:"none"}},children:[l&&(0,s.jsx)("p",{style:{marginTop:0,marginBottom:10},children:P("At the time of activating the license, you agreed that we may send telemetry data from your installation to our server. You can revoke this at any time by deactivating and reactivating the licence.","legal-text")}),(0,s.jsx)("p",{style:{marginTop:0},children:k("The following data (raw) will be sent to our server:")}),(0,s.jsx)(h.A,{spinning:a,children:(0,s.jsx)("textarea",{readOnly:!0,style:{width:"100%",height:300},value:r?JSON.stringify(r,null,4):""})})]}),(0,s.jsx)("span",{onClick:e=>{i||d(!0),e.preventDefault()},children:n?(0,s.jsx)("a",{children:o}):o})]})})),U=(0,y.PA)((e=>{let{pluginUpdate:t}=e;const n={...N,zoom:.8},{privacyProvider:i,privacyPolicy:o,allowsTelemetry:r,allowsAutoUpdates:l,allowsNewsletter:c,additionalCheckboxes:d,licenses:[p]}=t;return(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(a.A.Item,{name:"autoUpdates",valuePropName:"checked",style:n,children:(0,s.jsx)(w.A,{children:C(k("Updates containing bug fixes and new features will be downloaded and installed automatically."),{a:(0,s.jsx)("a",{href:o,target:"_blank",rel:"noreferrer"})})})}),(0,s.jsx)(a.A.Item,{name:"terms",valuePropName:"checked",required:!0,rules:[{type:"boolean",required:!0,transform:e=>e||void 0,message:k("Please confirm the transfer of technical data as this is required for license activation and update functionality.")}],style:n,children:(0,s.jsx)(w.A,{children:P("I allow to transfer technical data about this WordPress installation to the update server of %1$s and get latest announcements. This data is required for license activation and update functionality.","legal-text",i)})}),r&&(0,s.jsx)(a.A.Item,{name:"telemetry",valuePropName:"checked",style:n,children:(0,s.jsx)(w.A,{children:C(P("I allow telemetry data about the use of this WordPress plugin to be collected in accordance with the %1$s {{a}}privacy policy{{/a}}. This data does not include any personal information about users of the plugin. Collected data ({{aDataExample}}open example of transmitted data{{/aDataExample}}) will be used to provide you with the best possible support and to improve the plugin.","legal-text",i),{a:(0,s.jsx)("a",{href:o,target:"_blank",rel:"noreferrer"}),aDataExample:(0,s.jsx)(O,{license:p,linkWrapper:!0})})})}),d.map((e=>{let{id:t,text:i}=e;return(0,s.jsx)(a.A.Item,{name:t,valuePropName:"checked",style:n,children:(0,s.jsx)(w.A,{children:i})},t)})),c&&(0,s.jsx)(a.A.Item,{name:"newsletter",valuePropName:"checked",style:n,children:(0,s.jsx)(w.A,{children:P("I would like to receive the %1$s newsletter with WordPress news, sales and product offers (approx. 1-2 per month) via email. I know that I can withdraw my consent for the newsletter at any time.","legal-text",i)})}),(0,s.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.newsletter!==t.newsletter,children:e=>{let{getFieldValue:t}=e;return t("newsletter")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A.Item,{label:k("First name"),name:"firstName",style:N,required:!0,rules:[{required:!0,message:k("Please enter your first name!")}],children:(0,s.jsx)(b.A,{})}),(0,s.jsx)(a.A.Item,{label:k("Email"),name:"email",style:N,required:!0,rules:[{type:"email",required:!0,message:k("Please enter your email address!")}],children:(0,s.jsx)(b.A,{})}),(0,s.jsx)("div",{className:"notice notice-info inline below-h2 notice-alt",style:{margin:0},children:(0,s.jsx)("p",{children:k("Please note that we will send you a confirmation e-mail. Only when you have clicked on the activation link in the email will you receive the newsletter.")})})]})}}),(0,s.jsx)(a.A.Item,{style:n,children:C(k("Information on the processing of your personal data can be found in our {{a}}privacy policy{{/a}}."),{a:(0,s.jsx)("a",{href:o,target:"_blank",rel:"noreferrer"})})})]})}));var I=n(5330),T=n(3491);const E=e=>{let{url:t,style:n,label:i=k("Learn more")}=e;const o={cursor:"pointer",...n};return(0,s.jsxs)(T.A,{style:o,onClick:()=>window.open(t,"_blank"),children:[(0,s.jsx)(I.A,{})," ",i]})},F={labelCol:{span:24},wrapperCol:{span:24}},N={marginBottom:8},L=(0,y.PA)((e=>{let{onSave:t,onFailure:n,footer:i,pluginUpdate:o}=e;const{message:r}=v.A.useApp(),[l,c]=(0,m.useState)(!1),{busy:d,slug:p,allowsAutoUpdates:u,needsLicenseKeys:y,licenses:A,unlicensedEntries:S,noUsageEntries:P,modifiableEntries:O,invalidKeysError:I,accountSiteUrl:T,additionalCheckboxes:L,licenseKeyHelpUrl:D,name:R,potentialNewsletterUser:{firstName:_,email:M},showBlogName:X,showNetworkWideUpdateIssueNotice:W}=o,q=A.length>1,B={licenses:A.map((e=>{let{blog:t,code:n,installationType:s,hint:i,noUsage:o}=e;var a;return{blog:t,code:n||(i?null==(a=i.help.match(/(\w{8}-\w{4}-\w{4}-\w{4}-\w{12})|(\w{32})/))?void 0:a[0]:"")||"",installationType:s||"",noUsage:o}})),autoUpdates:u,terms:!1,telemetry:!1,newsletter:!1,firstName:_,email:M,...L.reduce(((e,t)=>(e[t.id]=!1,e)),{})},[V]=a.A.useForm(),[H,K]=(0,m.useState)(P.length!==S.length),$=(0,m.useCallback)((async e=>{const{licenses:s,...i}=e,a={...i,licenses:JSON.stringify(y?s.filter((e=>{let{blog:t}=e;const[n]=A.filter((e=>e.blog===t));return S.indexOf(n)>-1})):void 0)};try{await o.update(a),V.setFieldsValue({terms:!1,telemetry:!1,newsletter:!1}),r.success(k("Your license has been activated!")),null==t||t()}catch(e){throw o.invalidKeysError||r.error(e.responseJSON.message),null==n||n(),e}}),[o,t,A,S,y]),G=(0,m.useCallback)((async e=>{try{await $(e)}catch(e){}finally{c(!1)}}),[V,$,c]),J=(0,m.useCallback)((()=>{c(!0),K(!0)}),[]);return(0,s.jsxs)(h.A,{spinning:d,children:[W&&(0,s.jsxs)("div",{className:"notice notice-error inline below-h2 notice-alt",style:{margin:"0 0 10px 0"},children:[(0,s.jsx)("p",{children:k("You are using a WordPress mulisite. Due to technical limitations of WordPress core, %s can receive automatic updates in WordPress multisites only if the plugin is enabled network-wide. You can enable the plugin network-wide, but still only license it for specific sites.",R)}),(0,s.jsx)("p",{children:k("Please enable %s network-wide or take care of regular updates manually!",R)})]}),S.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"description",style:{marginBottom:15},children:y?k("Activate your %s PRO license to receive regular updates and support.",R):C(k("To use all advantages of %s {{strong}}you need a free license{{/strong}}. After license activation you will receive answers to support requests and announcements in your plugin (e.g. also notices for discount actions of the PRO version).",R),{strong:(0,s.jsx)("strong",{})})}),(0,s.jsxs)(a.A,{name:`license-form-${p}`,id:`license-form-${p}`,form:V,...F,initialValues:B,onFinish:G,onFinishFailed:J,onChange:()=>{K(!0)},labelWrap:!0,children:[y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A.List,{name:"licenses",children:e=>e.map((e=>{const{blog:t}=V.getFieldValue(["licenses",e.name]),[n]=A.filter((e=>e.blog===t));if(-1===S.indexOf(n))return null;const{busy:i,blogName:o,programmatically:c,host:d}=n,p=null==I?void 0:I[t],u=l?{}:p||n.hint,g=!!(null==p?void 0:p.debug.errors.LicenseMaxUsagesReached);return(0,s.jsxs)(h.A,{spinning:i,children:[(0,s.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(t,n)=>t.licenses[e.key].noUsage!==n.licenses[e.key].noUsage,children:t=>{let{getFieldValue:n}=t;const i=n(["licenses",e.key,"noUsage"]);return(0,s.jsxs)(a.A.Item,{label:(0,s.jsxs)("span",{children:[S.length>1||X?C(k("Installation type and license key for {{strong}}%s{{/strong}}",o),{strong:(0,s.jsx)("strong",{})}):k("Installation type and license key")," ",(0,s.jsx)(E,{url:D})]}),...u,required:!0,style:N,children:[!i&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.A.Item,{name:[e.name,"code"],noStyle:!0,rules:[{pattern:/(^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$)|(^\w{32}$)/,required:!0,message:k("Please enter a valid license key!")}],normalize:e=>null==e?void 0:e.trim(),children:(0,s.jsx)(b.A,{placeholder:c?c.code:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",disabled:!!c,addonBefore:(0,s.jsx)(f.A,{destroyTooltipOnHide:!0,overlayStyle:{maxWidth:"370px"},content:(0,s.jsxs)("div",{className:"wp-clearfix",children:[(0,s.jsx)("p",{style:{marginTop:0},children:C(k("{{strong}}Production:{{/strong}} Use this, when your site is {{i}}live{{/i}} and {{i}}publicly available{{/i}} to your website visitors."),{strong:(0,s.jsx)("strong",{}),i:(0,s.jsx)("i",{})})}),(0,s.jsx)("p",{children:C(k("{{strong}}Development:{{/strong}} Use this, when your site is {{i}}not yet live{{/i}}, or it is a {{i}}staging environment{{/i}} of your site."),{strong:(0,s.jsx)("strong",{}),i:(0,s.jsx)("i",{})})}),(0,s.jsx)("p",{style:{marginBottom:0},children:k("You can change the installation-type at any time by deactivating the license and activate it again.")})]}),title:(0,s.jsxs)(s.Fragment,{children:[k("What is an installation type?")," ",(0,s.jsx)(E,{url:k("https://devowl.io/knowledge-base/license-installation-type/")})]}),placement:"topLeft",trigger:"hover",children:(0,s.jsx)("div",{children:(0,s.jsx)(a.A.Item,{name:[e.name,"installationType"],noStyle:!0,rules:[{required:!0,message:k("Please choose an installation type!")}],children:(0,s.jsxs)(x.A,{placeholder:k("Installation type"),disabled:!!c,children:[(0,s.jsx)(x.A.Option,{value:"",disabled:!0,children:c?"development"===c.type?k("Development"):k("Production"):k("Select installation type...")}),(0,s.jsx)(x.A.Option,{value:"production",children:k("Production")}),(0,s.jsx)(x.A.Option,{value:"development",children:k("Development")})]})})})})})})}),q&&(0,s.jsx)(a.A.Item,{name:[e.name,"noUsage"],valuePropName:"checked",style:{marginTop:i?-25:0,marginBottom:0},children:(0,s.jsx)(w.A,{children:k("I do not want to license and use the plugin for this site within my multisite.")})})]})}}),c&&(0,s.jsx)("div",{className:"notice notice-warning inline below-h2 notice-alt",style:{margin:"0 0 10px 0"},children:(0,s.jsxs)("p",{children:[C(k("This license cannot be activated manually because it is configured programmatically. That means you have used the {{a}}activation filter{{/a}} for host {{code}}%s{{/code}} (Blog ID: %d). Unfortunately, something went wrong during the license activation.",d,t),{code:(0,s.jsx)("code",{}),a:(0,s.jsx)("a",{href:"https://docs.devowl.io/real-cookie-banner/hooks/DevOwl_RealProductManager_License_Programmatic_$slug.html",target:"_blank",rel:"noreferrer"})})," ","•"," ",(0,s.jsx)("a",{className:"button-link",onClick:async()=>{try{await n.retry(),n.hint&&r.error(n.hint.help)}catch(e){r.error(e.responseJSON.message)}},children:k("Retry activation")})]})}),g&&(0,s.jsx)(j.A,{type:"info",showIcon:!0,message:k("I have purchased a license that can be used on multiple websites! What can I do?"),description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:C(k("After purchasing one of our products, only one license key is generated by default, even if your purchase covers multiple websites. This license key can be used for only one website by default. To add more websites to your purchase, you can generate additional license keys within your quota in the {{a}}Customer Center{{/a}}."),{a:(0,s.jsx)("a",{href:T,target:"_blank",rel:"noreferrer"})})}),(0,s.jsx)("a",{className:"button button-primary",href:T,target:"_blank",rel:"noreferrer",children:k("Add licenses in the customer center now")})," ",(0,s.jsx)("a",{className:"button",target:"_blank",href:k("https://devowl.io/knowledge-base/the-limit-of-activated-clients-for-this-license-has-already-been-reached/"),rel:"noreferrer",children:k("Learn more")})]})})]},e.key)}))}),(0,s.jsx)(g.A,{type:"horizontal",style:{margin:"10px 0"}})]}),O.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{display:H?"block":"none"},children:(0,s.jsx)(U,{pluginUpdate:o})}),i]})]})]})]})}));var D=n(4918),R=n(5881),_=n(7067),M=n(8170),X=n(5107);const W=(0,y.PA)((e=>{let{license:t,onDeactivate:n}=e;const{message:i}=v.A.useApp(),{busy:o,uuid:a,installationType:l,telemetryDataSharingOptIn:c,blogName:d,code:p,remote:u,programmatically:g,host:y,blog:m,store:{needsLicenseKeys:b}}=t;return(0,s.jsx)(h.A,{spinning:o,children:(0,s.jsxs)(D.A.Item,{style:{paddingLeft:0,paddingRight:0},actions:[b&&(0,s.jsxs)(r.A,{children:[(0,s.jsx)(X.A,{title:k("Client UUID: %s, click to copy.",a),children:(0,s.jsx)(R.A,{style:{cursor:"pointer"},onClick:()=>{!function(e){const t=document.createElement("textarea");t.innerHTML=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(a),i.success("Successfully copied client UUID key to clipboard!")}})}),"production"===l?k("Production"):"development"===l?k("Development"):"n/a"]},"installationType"),u&&(0,s.jsxs)(r.A,{children:[(0,s.jsx)(_.A,{}),k("Activated %s",new Date(u.licenseActivation.activatedAt).toLocaleString(document.documentElement.lang))]},"activatedAt"),(0,s.jsx)(O,{license:t,disabled:!c,children:(0,s.jsxs)(r.A,{style:{cursor:"pointer"},children:[(0,s.jsx)(M.A,{}),k(c?"Telemetry data sharing enabled":"Telemetry data sharing disabled")]},"telemetryDataSharingOptIn")},"telemetryModal"),!g&&(0,s.jsx)("a",{className:"button-link",onClick:async()=>{try{await t.deactivate()}catch(e){i.error(e.responseJSON.message)}null==n||n(t)},children:k("Deactivate")},"deactivate")].filter(Boolean),children:[(0,s.jsx)(D.A.Item.Meta,{title:d,description:b?(0,s.jsxs)(s.Fragment,{children:[k("Your license key"),": ",(0,s.jsx)("code",{children:p})]}):(0,s.jsxs)(s.Fragment,{children:[k("Your installation is fully activated."),(0,s.jsx)("div",{style:{marginTop:15},children:(0,s.jsx)("a",{rel:"noreferrer",href:k("https://devowl.io/knowledge-base/upgrade-free-to-pro-version/"),className:"button",target:"_blank",children:k("Enter license key to unlock PRO features")})})]})}),g&&(0,s.jsx)("div",{className:"notice notice-info inline below-h2 notice-alt",style:{margin:"0 0 10px 0"},children:(0,s.jsx)("p",{children:C(k("This license cannot be deactivated manually because it is configured programmatically. That means you have used the {{a}}activation filter{{/a}} for host {{code}}%s{{/code}} (Blog ID: %d). Please remove the filter to deactivate the license!",y,m),{code:(0,s.jsx)("code",{}),a:(0,s.jsx)("a",{href:"https://docs.devowl.io/real-cookie-banner/hooks/DevOwl_RealProductManager_License_Programmatic_$slug.html",target:"_blank",rel:"noreferrer"})})})})]})})})),q=(0,y.PA)((e=>{let{onDeactivate:t,pluginUpdate:n}=e;const{licensedEntries:i}=n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.A,{itemLayout:"vertical",size:"small",dataSource:i,renderItem:e=>(0,s.jsx)(W,{license:e,onDeactivate:t})}),(0,s.jsx)("p",{style:{textAlign:"right"},children:(0,s.jsx)(w.A,{disabled:n.busy,checked:n.announcementsActive,onChange:e=>n.setAnnouncementActive(e.target.checked),children:k("Show announcements for this plugin")})})]})}));var B=n(9670),V=n(4497);class H extends l.BaseOptions{constructor(e){super(),this.rootStore=e,this.pureSlug=l.BaseOptions.getPureSlug("real-product-manager-wp-client"),this.pureSlugCamelCased=l.BaseOptions.getPureSlug("real-product-manager-wp-client",!0),(0,V.runInAction)((()=>Object.assign(this,window[this.pureSlugCamelCased])))}}let K;(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],H.prototype,"others",void 0);const $=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(K||(K=(0,l.createRequestFactory)(window[l.BaseOptions.getPureSlug("real-product-manager-wp-client",!0)]))).request(...t)},G={path:"/plugin-update/:slug/license/:blogId",method:l.RouteHttpVerb.DELETE},J={path:"/plugin-update/:slug/license/:blogId/retry",method:l.RouteHttpVerb.POST},z={path:"/plugin-update/:slug/telemetry/:blogId",method:l.RouteHttpVerb.GET};class Y{constructor(e,t){this.busy=!1,this.retry=(0,V.flow)((function*(){this.busy=!0;try{const e=yield $({location:J,params:{slug:this.store.slug,blogId:this.blog}});(0,V.set)(this,e)}catch(e){throw console.log(e),e}finally{this.busy=!1}})),this.deactivate=(0,V.flow)((function*(){this.busy=!0;try{const e=yield $({location:G,params:{slug:this.store.slug,blogId:this.blog}});(0,V.set)(this,e)}catch(e){throw console.log(e),e}finally{this.busy=!1}})),this.fetchTelemetryData=(0,V.flow)((function*(){this.busy=!0;try{const e=yield $({location:z,params:{slug:this.store.slug,blogId:this.blog}});this.telemetryData=e}catch(e){throw console.log(e),e}finally{this.busy=!1}})),(0,V.runInAction)((()=>(0,V.set)(this,e))),this.store=t}}(0,B.Cg)([V.observable],Y.prototype,"busy",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"uuid",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"blog",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"host",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"programmatically",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"blogName",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"installationType",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"telemetryDataSharingOptIn",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"code",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"hint",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"remote",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],Y.prototype,"noUsage",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type","undefined"==typeof ResponseRouteLicenseTelemetryGet?Object:ResponseRouteLicenseTelemetryGet)],Y.prototype,"telemetryData",void 0);const Z={path:"/announcement/:slug/active",method:l.RouteHttpVerb.POST},Q={path:"/plugin-update/:slug",method:l.RouteHttpVerb.PATCH},ee={path:"/plugin-update/:slug/skip",method:l.RouteHttpVerb.POST};class te{get licensedEntries(){return this.licenses.filter((e=>{let{code:t}=e;return t}))}get unlicensedEntries(){return this.licenses.filter((e=>{let{code:t}=e;return!t}))}get noUsageEntries(){return this.unlicensedEntries.filter((e=>{let{noUsage:t}=e;return t}))}get modifiableEntries(){return this.unlicensedEntries.filter((e=>{let{programmatically:t}=e;return!t}))}get isLicensed(){return 0===this.unlicensedEntries.length}constructor(e,t){this.busy=!1,this.additionalCheckboxes=[],this.showBlogName=!1,this.showNetworkWideUpdateIssueNotice=!1,this.setAnnouncementActive=(0,V.flow)((function*(e){this.busy=!0;try{const t=yield $({location:Z,params:{slug:this.slug},request:{state:e}});return t.success&&(this.announcementsActive=e),t.success}catch(e){throw console.log(e),e}finally{this.busy=!1}})),this.update=(0,V.flow)((function*(e){this.busy=!0,this.invalidKeysError=void 0;try{const t=yield $({location:Q,params:{slug:this.slug},request:e});this.fromResponse(t)}catch(e){var t,n;throw console.log(e),(null==(n=e.responseJSON)||null==(t=n.data)?void 0:t.invalidKeys)&&(this.invalidKeysError=e.responseJSON.data.invalidKeys),e}finally{this.busy=!1}})),this.skip=(0,V.flow)((function*(){this.busy=!0;try{yield $({location:ee,params:{slug:this.slug}})}catch(n){var e,t;throw console.log(n),(null==(t=n.responseJSON)||null==(e=t.data)?void 0:e.invalidKeys)&&(this.invalidKeysError=n.responseJSON.data.invalidKeysError),n}finally{this.busy=!1}})),this.fromResponse(e),this.store=t}fromResponse(e){let{licenses:t,...n}=e;(0,V.set)(this,n),this.licenses=[],null==t||t.forEach((e=>{this.licenses.push(new Y(e,this))}))}}(0,B.Cg)([V.observable],te.prototype,"busy",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"slug",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Array)],te.prototype,"licenses",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"hasInteractedWithFormOnce",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"name",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"needsLicenseKeys",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"announcementsActive",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"allowsAutoUpdates",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"allowsTelemetry",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"allowsNewsletter",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"potentialNewsletterUser",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"privacyProvider",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"privacyPolicy",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"accountSiteUrl",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"additionalCheckboxes",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"licenseKeyHelpUrl",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"checkUpdateLink",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type","undefined"==typeof ResponseRoutePluginUpdatePatchErrorInvalidKeysData?Object:ResponseRoutePluginUpdatePatchErrorInvalidKeysData)],te.prototype,"invalidKeysError",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"showBlogName",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",Object)],te.prototype,"showNetworkWideUpdateIssueNotice",void 0),(0,B.Cg)([V.computed,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",[]),(0,B.Sn)("design:returntype",void 0)],te.prototype,"licensedEntries",null),(0,B.Cg)([V.computed,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",[]),(0,B.Sn)("design:returntype",void 0)],te.prototype,"unlicensedEntries",null),(0,B.Cg)([V.computed,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",[]),(0,B.Sn)("design:returntype",void 0)],te.prototype,"noUsageEntries",null),(0,B.Cg)([V.computed,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",[]),(0,B.Sn)("design:returntype",void 0)],te.prototype,"modifiableEntries",null),(0,B.Cg)([V.computed,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",[]),(0,B.Sn)("design:returntype",void 0)],te.prototype,"isLicensed",null),(0,B.Cg)([V.action,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",["undefined"==typeof Partial?Object:Partial]),(0,B.Sn)("design:returntype",void 0)],te.prototype,"fromResponse",null);const ne={path:"/plugin-update/:slug",method:l.RouteHttpVerb.GET};class se{constructor(e){this.busy=!1,this.pluginUpdates=new Map,this.pluginUpdateFetchErrors=new Map,this.showInModal=(0,V.flow)((function*(e){this.modalPlugin=e;try{yield this.fetchPluginUpdate(e)}catch(e){throw console.log(e),e}})),this.fetchPluginUpdate=(0,V.flow)((function*(e){this.busy=!0;try{const t=yield $({location:ne,params:{slug:e}}),n=new te(t,this);return this.pluginUpdates.set(e,n),this.pluginUpdateFetchErrors.delete(e),n}catch(t){throw console.log(t),this.pluginUpdateFetchErrors.set(e,t),t}finally{this.busy=!1}})),this.rootStore=e}hideModal(){this.modalPlugin=void 0}}(0,B.Cg)([V.observable],se.prototype,"busy",void 0),(0,B.Cg)([V.observable,(0,B.Sn)("design:type",String)],se.prototype,"modalPlugin",void 0),(0,B.Cg)([V.observable],se.prototype,"pluginUpdates",void 0),(0,B.Cg)([V.observable],se.prototype,"pluginUpdateFetchErrors",void 0),(0,B.Cg)([V.action,(0,B.Sn)("design:type",Function),(0,B.Sn)("design:paramtypes",[]),(0,B.Sn)("design:returntype",void 0)],se.prototype,"hideModal",null);class ie{get context(){return this.contextMemo?this.contextMemo:this.contextMemo=(0,l.createContextFactory)(this)}constructor(){this.optionStore=new H(this),this.pluginUpdateStore=new se(this)}static get StoreProvider(){return ie.get.context.StoreProvider}static get get(){return ie.me?ie.me:ie.me=new ie}}const oe=()=>ie.get.context.useStores(),ae=(0,y.PA)((e=>{let{slug:t}=e;var n;const i=oe().pluginUpdateStore.pluginUpdateFetchErrors.get(t),o=null==i||null==(n=i.responseJSON)?void 0:n.message;return(0,s.jsx)("div",{className:"notice notice-error inline below-h2 notice-alt",style:{margin:"20px 0"},children:(0,s.jsx)("p",{children:C(k("Something has gone wrong%s. It could be that you have configured your WordPress instance in such a way that you have blocked the WordPress REST API. Find out how to deal with this {{a}}here{{/a}}.",o?` (${o})`:""),{a:(0,s.jsx)("a",{href:k("https://devowl.io/knowledge-base/wordpress-rest-api-does-not-respond/"),target:"_blank",rel:"noreferrer"})})})})})),re=(0,y.PA)((e=>{let{formProps:t={},listProps:n={},slug:i}=e;const{pluginUpdateStore:o}=oe(),{busy:a,pluginUpdates:r,pluginUpdateFetchErrors:l}=o,c=r.get(i),d=(null==c?void 0:c.unlicensedEntries.length)>0&&(null==c?void 0:c.licensedEntries.length)>0;return(0,m.useEffect)((()=>{try{o.fetchPluginUpdate(i)}catch(e){}}),[i]),l.get(i)?(0,s.jsx)(ae,{slug:i}):a||!c?(0,s.jsx)(h.A,{spinning:!0}):(0,s.jsxs)("div",{children:[d&&(0,s.jsx)(g.A,{type:"horizontal",orientation:"left",style:{marginTop:0},children:k("Not yet licensed")}),(0,s.jsx)(L,{...t,pluginUpdate:c}),d&&(0,s.jsx)(g.A,{type:"horizontal",orientation:"left",children:k("Already licensed")}),c.licensedEntries.length>0&&(0,s.jsx)(q,{...n,pluginUpdate:c})]})})),le=(0,y.PA)((()=>{const[e,t]=(0,m.useState)(!1),{pluginUpdateStore:n}=oe(),{busy:i,modalPlugin:o,pluginUpdates:a,pluginUpdateFetchErrors:r}=n,l=o?a.get(o):void 0,c=(null==l?void 0:l.unlicensedEntries.length)>0&&(null==l?void 0:l.licensedEntries.length)>0,d=(0,m.useCallback)((()=>{if(e){const{checkUpdateLink:e}=l;e?window.location.href=e:window.location.reload()}else n.hideModal()}),[e,n,l]),p=(0,m.useCallback)((()=>t(!0)),[t]),y=r.get(o);return(0,m.useEffect)((()=>{document.body.classList[o?"add":"remove"]("rpm-wpc-antd-modal-open")}),[o]),o?(0,s.jsx)(u.A,{open:!0,okButtonProps:{form:`license-form-${null==l?void 0:l.slug}`,htmlType:"submit",style:{display:0===(null==l?void 0:l.unlicensedEntries.length)||y?"none":void 0}},cancelButtonProps:{style:{display:"none"}},onCancel:d,okText:k("Save"),title:l?(0,s.jsxs)("span",{style:{fontWeight:"normal"},children:[(0,s.jsxs)("strong",{children:[l.name,":"]})," ",k("License settings")]}):"",width:800,children:y?(0,s.jsx)(ae,{slug:o}):i||!l?(0,s.jsx)(h.A,{spinning:!0}):(0,s.jsxs)("div",{children:[c&&(0,s.jsx)(g.A,{type:"horizontal",orientation:"left",style:{marginTop:0},children:k("Not yet licensed")}),(0,s.jsx)(L,{onSave:p,pluginUpdate:l}),c&&(0,s.jsx)(g.A,{type:"horizontal",orientation:"left",children:k("Already licensed")}),l.licensedEntries.length>0&&(0,s.jsx)(q,{onDeactivate:p,pluginUpdate:l})]})}):null}));var ce=n(9327),de=n(5666);const pe=e=>{let{children:t,configProvider:n={},app:i={}}=e;return(0,s.jsx)(de.Ay,{prefixCls:"rpm-wpc-antd",iconPrefixCls:"rpm-wpc-antd-anticon",theme:{token:{colorPrimary:"#2271b1",borderRadius:3}},...n,children:(0,s.jsx)(ce.Z_3,{value:{prefixCls:"rpm-wpc-antd-anticon"},children:(0,s.jsx)(v.A,{message:{top:50},...i,children:(0,s.jsx)(ie.StoreProvider,{children:t})})})})},ue="rpm-wp-client-plugin-update-";function he(){const{hash:e}=window.location;if(e.startsWith(`#${ue}`)){const t=e.substr(ue.length+1);ie.get.pluginUpdateStore.showInModal(t),window.location.hash=""}}var ge=n(2975),ye=n(7333),me=n(1533);const ve={path:"/feedback/:slug",method:l.RouteHttpVerb.POST},be={labelCol:{span:24},wrapperCol:{span:24}},fe={marginBottom:8},xe=e=>{let{initialValues:t={},plugin:n,name:i,hasAtLeastOneActiveLicense:o,isPluginActiveForNetwork:r,privacyPolicy:l,privacyProvider:c,onClose:d,onDeactivate:p}=e;const{message:y}=v.A.useApp(),f=(0,m.useMemo)((()=>({"upgrade-to-pro":k("Upgrade to PRO Version"),"not-working":k("Plugin does not work"),"missing-features":k("Not the features I want"),incompatible:k("Incompatible with themes/plugins"),"missing-doc":k("Lack of documentation"),"found-better-plugin":k("Found a better plugin"),temp:k("Temporary deactivation"),other:k("Other")})),[]),[x]=a.A.useForm(),j=`license-form-${n}`,[A,S]=(0,m.useState)(!0),[P,O]=(0,m.useState)(!1),U=(0,m.useCallback)((()=>{window.confirm(k("Are you sure you want to leave the feedback form?"))&&S(!1)}),[]),I=(0,m.useCallback)((async e=>{let{skip:t=!1,reason:s="other",note:i="",email:o="",name:a="",deactivateLicense:r=!1}=e;try{O(!0),await $({location:ve,params:{slug:n},request:{skip:t,reason:s,note:i,email:o,name:o?a:"",deactivateLicense:r}}),null==p||p()}catch(e){var l,c,d;const{responseJSON:t}=e,n=null==t||null==(d=t.data)||null==(c=d.body)||null==(l=c[0])?void 0:l.code;if(["DeactivationFeedbackAlreadyGiven","DeactivationFeedbackMightBeSpam"].indexOf(n)>-1||!n)return void(null==p||p());var u,h,g;y.error(null==t||null==(g=t.data)||null==(h=g.body)||null==(u=h[0])?void 0:u.message)}finally{O(!1)}}),[x,n]),T=(0,m.useCallback)((()=>{const e=x.getFieldValue("deactivateLicense");e?I({skip:!0,deactivateLicense:e}):null==p||p()}),[I]);return(0,s.jsx)(u.A,{afterClose:d,onCancel:U,open:A,footer:[(0,s.jsx)(ye.Ay,{type:"default",onClick:T,className:"alignleft",disabled:P,children:(0,s.jsx)("b",{children:k("Skip & Deactivate")})},"skip"),(0,s.jsx)(ye.Ay,{type:"primary",htmlType:"submit",form:j,disabled:P,children:k("Deactivate")},"submit")],title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ge.A,{twoToneColor:"#eb2f96"})," ",k("Too bad you are leaving")]}),children:(0,s.jsx)(h.A,{spinning:P,children:(0,s.jsxs)(a.A,{name:j,id:j,form:x,...be,onFinish:I,initialValues:t,layout:"vertical",labelWrap:!0,children:[(0,s.jsx)(a.A.Item,{name:"reason",label:(0,s.jsx)(s.Fragment,{children:k("Please give us feedback why you deactivate %s.",i)}),style:fe,required:!0,rules:[{required:!0,message:k("Please provide a reason!")}],children:(0,s.jsx)(me.Ay.Group,{children:Object.keys(f).map((e=>(0,s.jsx)(me.Ay,{value:e,style:{width:"calc(50% - 8px)",float:"left"},children:f[e]},e)))})}),(0,s.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.reason!==t.reason,children:e=>{let{getFieldValue:t}=e;return!!t("reason")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A.Item,{label:k("What could we do better?"),name:"note",style:fe,children:(0,s.jsx)(b.A.TextArea,{autoSize:{minRows:3}})}),(0,s.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.answerTerms!==t.answerTerms,children:e=>{let{getFieldValue:t}=e;return!!t("reason")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A.Item,{name:"email",label:k("Email for answer/solution"),style:fe,rules:[{type:"email",required:t("answerTerms"),message:k("Please provide a valid e-mail address!")}],children:(0,s.jsx)(b.A,{})}),(0,s.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.email!==t.email,children:e=>{let{getFieldValue:t}=e;return(0,s.jsxs)(s.Fragment,{children:[!!t("email")&&(0,s.jsx)(a.A.Item,{name:"name",label:k("Name"),required:!0,style:fe,rules:[{required:!0,message:k("Please provide a name!")}],children:(0,s.jsx)(b.A,{})}),(0,s.jsx)(a.A.Item,{name:"answerTerms",valuePropName:"checked",required:!0,rules:[{type:"boolean",required:!!t("email"),transform:e=>e||void 0,message:k("Please confirm that you have checked the privacy policy.")}],style:fe,children:(0,s.jsx)(w.A,{style:{zoom:.8},children:C(k("I would like to receive a response to my request. For this purpose, I agree to the data processing of my feedback and my e-mail address. I have read and acknowledge the %s {{a}}Privacy Policy{{/a}}.",c),{a:(0,s.jsx)("a",{href:l,target:"_blank",rel:"noreferrer"})})})})]})}})]})}})]})}}),(0,s.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.note!==t.note||e.answerTerms!==t.answerTerms,children:e=>{let{getFieldValue:t}=e;const n=t("answerTerms")||!1,i=t("note")||"";return n?null:i.split(" ").length>=5?(0,s.jsx)("div",{className:"notice notice-info inline below-h2 notice-alt",style:{margin:0},children:(0,s.jsx)("p",{children:k("Allow us to reply to you by email and we will get back to you as soon as possible!")})}):(0,s.jsx)("p",{className:"description",style:{marginTop:5},children:C(k("Are there any problems with the setup or use of the plugin? Maybe we can help you in the support. {{a}}Contact support{{/a}}."),{a:(0,s.jsx)("a",{href:k("https://devowl.io/support/"),target:"_blank",rel:"noreferrer"})})})}}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.A,{style:{margin:"12px 0"}}),(0,s.jsx)(a.A.Item,{style:{marginBottom:0},name:"deactivateLicense",valuePropName:"checked",label:k("Do you want to deactivate your active license so that you can use it again on another site?"),children:(0,s.jsx)(w.A,{children:k(r?"Yes, deactivate all active licenses for all sites within this multisite":"Yes, deactivate license")})})]})]})})})};function we(){document.addEventListener("click",(e=>{const{names:t,currentUserFullName:n}=ie.get.optionStore.others,i=null==e?void 0:e.target;for(const o in t){const{plugin:a,hasAtLeastOneActiveLicense:r,isPluginActiveForNetwork:c}=t[o];if(i.matches(`tr[data-plugin="${a}"] a[href*="action=deactivate"]`)){const a=document.createElement("div");document.body.appendChild(a);const d=(0,l.createRoot)(a);d.render((0,s.jsx)(pe,{children:(0,s.jsx)(xe,{...t[o],initialValues:{name:n},plugin:o,hasAtLeastOneActiveLicense:r,isPluginActiveForNetwork:c,onClose:()=>{d.unmount()},onDeactivate:()=>{window.location.href=i.href}})})),e.preventDefault(),e.stopImmediatePropagation();break}}}),!0)}const je="data-rpm-wp-client-plugin-update";function Ae(){document.addEventListener("click",(e=>{var t;const n=null==(t=e.target)?void 0:t.getAttribute(je);n&&(ie.get.pluginUpdateStore.showInModal(n),e.preventDefault())}))}var Se,Pe;we(),Se=()=>{const e=document.createElement("div");document.body.appendChild(e),(0,l.createRoot)(e).render((0,s.jsx)(pe,{children:(0,s.jsx)(le,{})})),Ae(),he()},void 0===Pe&&(Pe="complete"),new Promise((e=>{let t=!1;const n=()=>{(()=>{const{readyState:e}=document,[t,,n]=d[e];if(!t){d[e][0]=!0,n();const[t,,s]=d.interactive;"complete"!==e||t||(d.interactive[0]=!0,s())}})(),!t&&d[Pe][0]&&(t=!0,null==Se||Se(),setTimeout(e,0))};n();for(const e of p)document.addEventListener(e,n);d[Pe][1].then(n)}))},1594:e=>{e.exports=React},5206:e=>{e.exports=ReactDOM},4497:e=>{e.exports=mobx}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,n,i,o)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,i,o]=e[d],r=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,i,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,r,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var d=l(s)}for(t&&t(n);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=self.webpackChunkdevowlWp_realProductManagerWpClient=self.webpackChunkdevowlWp_realProductManagerWpClient||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[26],(()=>s(9314)));i=s.O(i),devowlWp_realProductManagerWpClient=i})();
//# sourceMappingURL=https://sourcemap.devowl.io/real-cookie-banner/5.1.9/b88b0ca1431b5ade99e7776442c467cf/index.js.map
